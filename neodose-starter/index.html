<!doctype html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>NeoDose — Neonatal Dosing (Demo)</title>
    <meta name="description" content="NeoDose — single-tool SaaS demo for neonatal dose calculation.">
    <link rel="icon" href="/public/assets/logo.svg">
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.47.10/dist/umd/supabase.min.js"></script>
    <script defer src="/public/assets/app.js" type="module"></script>
  </head>
  <body class="bg-slate-50 text-slate-900">
    <header class="border-b bg-white">
      <div class="max-w-4xl mx-auto flex items-center justify-between p-4">
        <div class="flex items-center gap-3">
          <img src="/public/assets/logo.svg" class="w-8 h-8" alt="NeoDose logo" />
          <h1 class="text-xl font-semibold">NeoDose</h1>
          <span class="text-xs ml-2 px-2 py-1 rounded-full bg-emerald-100 text-emerald-800">Demo</span>
        </div>
        <nav class="flex items-center gap-3">
          <button id="btn-lang" class="text-sm px-3 py-1 rounded hover:bg-slate-100">اردو / EN</button>
          <a id="link-checkout" class="text-sm px-3 py-1 rounded border border-slate-300 hover:bg-slate-100 hidden" href="#" target="_blank" rel="noopener">Go Pro</a>
          <button id="btn-login" class="text-sm px-3 py-1 rounded bg-slate-900 text-white">Sign in</button>
          <button id="btn-logout" class="text-sm px-3 py-1 rounded border border-slate-300 hidden">Sign out</button>
        </nav>
      </div>
    </header>

    <main class="max-w-4xl mx-auto p-4">
      <section id="hero" class="my-8">
        <h2 class="text-2xl md:text-3xl font-bold mb-2" data-i18n="heroTitle">One-page neonatal dose calculator</h2>
        <p class="text-slate-600" data-i18n="heroSubtitle">For education and rapid estimates. Validate before clinical use.</p>
      </section>

      <!-- Login card -->
      <section id="auth-card" class="my-6">
        <div class="bg-white border rounded-2xl p-4 md:p-6 shadow-sm">
          <h3 class="text-lg font-semibold mb-2" data-i18n="authTitle">Sign in with your email</h3>
          <p class="text-sm text-slate-600 mb-4" data-i18n="authSubtitle">We use passwordless magic links.</p>
          <div class="flex flex-col md:flex-row gap-3">
            <input id="email" type="email" placeholder="you@example.com" class="w-full md:w-80 px-3 py-2 border rounded-lg" />
            <button id="send-magic" class="px-4 py-2 bg-emerald-600 text-white rounded-lg">Send magic link</button>
          </div>
          <p id="auth-msg" class="text-sm mt-3 text-slate-600"></p>
        </div>
      </section>

      <!-- App card -->
      <section id="app-card" class="my-6 hidden">
        <div class="bg-white border rounded-2xl p-4 md:p-6 shadow-sm">
          <div class="flex items-center justify-between">
            <h3 class="text-lg font-semibold" data-i18n="calcTitle">NeoDose Calculator (Demo: Caffeine Citrate)</h3>
            <span id="badge-plan" class="text-xs px-2 py-1 rounded-full bg-slate-200 text-slate-700">Free</span>
          </div>

          <div class="grid md:grid-cols-3 gap-4 mt-4">
            <div>
              <label class="block text-sm font-medium mb-1" data-i18n="weightLabel">Weight (kg)</label>
              <input id="weight" type="number" step="0.01" min="0" class="w-full px-3 py-2 border rounded-lg" placeholder="e.g., 2.8">
            </div>
            <div>
              <label class="block text-sm font-medium mb-1" data-i18n="regimenLabel">Regimen</label>
              <select id="regimen" class="w-full px-3 py-2 border rounded-lg">
                <option value="loading" data-i18n="regimenLoading">Loading dose (20 mg/kg)</option>
                <option value="maintenance" data-i18n="regimenMaintenance">Maintenance (5–10 mg/kg)</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1" data-i18n="customDoseLabel">Custom dose (mg/kg)</label>
              <input id="customDose" type="number" step="0.1" class="w-full px-3 py-2 border rounded-lg" placeholder="optional">
            </div>
          </div>

          <div class="flex items-center gap-3 mt-4">
            <button id="calc-btn" class="px-4 py-2 bg-slate-900 text-white rounded-lg" data-i18n="btnCalculate">Calculate</button>
            <button id="print-btn" class="px-4 py-2 border rounded-lg" data-i18n="btnPrint">Print</button>
            <button id="save-btn" class="px-4 py-2 border rounded-lg hidden" data-i18n="btnSave">Save (Pro)</button>
          </div>

          <!-- Results panel (always visible space) -->
          <div
            id="result"
            class="mt-5 p-4 border-2 border-dashed rounded-xl bg-slate-50 text-slate-800 text-sm min-h-[90px]"
            role="status"
            aria-live="polite"
          >
            <div class="text-slate-500">
              Result will appear here after you press <strong>Calculate</strong>.
            </div>
          </div>
          <p id="limit-msg" class="mt-3 text-rose-700 text-sm"></p>

          <hr class="my-6" />
          <p class="text-xs text-slate-500" data-i18n="disclaimer">
            Education only. Not a substitute for clinical judgment. Always confirm with local neonatal protocols.
          </p>
        </div>
      </section>

      <section class="my-10">
        <h4 class="font-semibold mb-2" data-i18n="faqTitle">FAQ</h4>
        <details class="border rounded-lg mb-2 bg-white p-3">
          <summary class="font-medium" data-i18n="faq1q">Is NeoDose free?</summary>
          <div class="text-sm text-slate-600 mt-2" data-i18n="faq1a">You can use 5 calculations/day for free. Pro unlocks unlimited use and saving.</div>
        </details>
        <details class="border rounded-lg mb-2 bg-white p-3">
          <summary class="font-medium" data-i18n="faq2q">How do I upgrade?</summary>
          <div class="text-sm text-slate-600 mt-2" data-i18n="faq2a">Click “Go Pro” to purchase. Use the same email you used to sign in.</div>
        </details>
      </section>
    </main>

    <footer class="border-t py-6 text-center text-xs text-slate-500">
      <a href="/privacy.md" class="underline">Privacy</a> ·
      <a href="/terms.md" class="underline">Terms</a> ·
      <a href="/disclaimer.md" class="underline">Medical Disclaimer</a>
    </footer>
  </body>
</html>
